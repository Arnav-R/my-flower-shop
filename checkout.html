<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout</title>
    <link rel="stylesheet" href="style4.css">
    <link href="https://fonts.googleapis.com/css2?family=Avenir:wght@700&family=Gill+Sans&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Vertical Navigation Bar -->
        <nav class="vertical-nav">
            <ul>
                <li><a href="index.html" class="icon home">🏠</a></li>
                <li><a href="#" class="icon products">🛒</a></li>
                <li><a href="#" class="icon care">🌿</a></li>
                <li><a href="#" class="icon contact">📞</a></li>
            </ul>
        </nav>

        <!-- Vertical Heading -->
        <div class="vertical-heading">CHECKOUT</div>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Left Section: Address and Cart Items -->
            <div class="left-section">
                <textarea id="address" name="address" placeholder="Enter your address here..."></textarea>
                <ul class="cart-item-list"></ul>
                <div class="total-price">
                    <p><strong>TOTAL PRICE: $0</strong></p>
                </div>
                <button class="confirm-order-btn">CONFIRM ORDER</button>
            </div>

            <!-- Right Section: Product Image -->
            <div class="right-section">
                <img src="tulips.png" alt="Pink Tulips" class="main-image">
            </div>
        </main>
    </div>

    <script>
        // Initialize cart and elements
        const savedCart = JSON.parse(localStorage.getItem("cart")) || [];
        const cartItemList = document.querySelector(".cart-item-list");
        const totalPriceElement = document.querySelector(".total-price p strong");
        const confirmOrderBtn = document.querySelector(".confirm-order-btn");
        const addressInput = document.querySelector("#address");

        function updateCartDisplay() {
            cartItemList.innerHTML = ""; // Clear previous items
            let totalPrice = 0;

            savedCart.forEach((item, index) => {
                const listItem = document.createElement("li");
                listItem.className = "cart-item";

                // Item details
                const itemText = document.createElement("span");
                itemText.textContent = `${item.name} - $${item.price} x ${item.quantity}`;
                listItem.appendChild(itemText);

                // Remove button
                const removeButton = document.createElement("button");
                removeButton.textContent = "Remove";
                removeButton.className = "remove-btn";
                removeButton.onclick = () => removeFromCart(index);
                listItem.appendChild(removeButton);

                cartItemList.appendChild(listItem);
                totalPrice += item.price * item.quantity;
            });

            totalPriceElement.textContent = `TOTAL PRICE: $${totalPrice.toFixed(2)}`;
        }

        function removeFromCart(index) {
            savedCart.splice(index, 1); // Remove item from cart
            localStorage.setItem("cart", JSON.stringify(savedCart)); // Update localStorage
            updateCartDisplay(); // Refresh the cart display
        }

        confirmOrderBtn.addEventListener("click", () => {
            const address = addressInput.value.trim();
            if (!address) {
                alert("Please enter your address.");
                return;
            }

            alert("Order confirmed!");
            localStorage.removeItem("cart"); // Clear cart after order confirmation
            window.location.href = "index.html";
        });

        // Display cart on load
        updateCartDisplay();
    </script>
</body>
</html>
